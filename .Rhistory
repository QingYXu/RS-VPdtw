y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/抗坏血酸-21000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e8,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc7 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/抗坏血酸-5000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e8,4,0.8)
query_in_bc =query_in - c
query_in_bc7 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc7, q, yleft=0, yright=0)$y
x <- ref_in_bc7[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/六次甲基四胺-2000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc8 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/六次甲基四胺-2000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc8 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc8, q, yleft=0, yright=0)$y
x <- ref_in_bc8[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/六次甲基四胺-2000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e8,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc14 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/六次甲基四胺-2000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e8,4,0.8)
query_in_bc =query_in - c
query_in_bc14 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc14, q, yleft=0, yright=0)$y
x <- ref_in_bc14[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/氯霉素-6000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc9 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/氯霉素-5000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc9 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc9, q, yleft=0, yright=0)$y
x <- ref_in_bc9[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/柠檬黄-50%-5500ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc10 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/柠檬黄-50%-3000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc10 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc10, q, yleft=0, yright=0)$y
x <- ref_in_bc10[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/三氯甲烷-2300ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc11 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/三氯甲烷-500ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc11 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc11, q, yleft=0, yright=0)$y
x <- ref_in_bc11[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/苏丹红1号-50%-8000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc12 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/苏丹红1号-50%-5000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc12 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc12, q, yleft=0, yright=0)$y
x <- ref_in_bc12[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/硝酸钠-2700ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e7,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc13 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/硝酸钠-2000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e7,4,0.8)
query_in_bc =query_in - c
query_in_bc13 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc13, q, yleft=0, yright=0)$y
x <- ref_in_bc13[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
length(ref_in_bc13)
setwd('D:/StdVpdtw')
rs_min=300
rs_max=3000
ref_df  =  read.csv(file = 'ref-i/氯霉素-6000ms.txt', header = FALSE)
ref_rs = as.vector(unlist(ref_df['V1']))
ref_in = as.vector(unlist(ref_df['V2']))
ref_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
ref_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
b=airPLS(ref_in,10e8,4,0.8)
ref_in_bc =ref_in - b
ref_in_bc13 = ref_in_bc - min(ref_in_bc)
query_df  =  read.csv(file = 'query-i/氯霉素-5000ms.txt', header = FALSE)
query_rs = as.vector(unlist(query_df['V1']))
query_in = as.vector(unlist(query_df['V2']))
query_in=ref_in[ref_rs>rs_min & ref_rs<rs_max]
query_rs=ref_rs[ref_rs>rs_min & ref_rs<rs_max]
c=airPLS(query_in,10e8,4,0.8)
query_in_bc =query_in - c
query_in_bc13 = query_in_bc - min(query_in_bc)
link <- function(x,y,s)
{x1 <- query_rs[1:1000]
s1 <- result$shift[1:1000]
x2 <- query_rs[1001:1600]
s2 <- c(0,rep(0,599))
x <- c(x1,x2)
s <- c(s1,s2)
y <- x + s
return(c(y))}
q <- link(x <- query_rs,s <- result$shift)
query_interp = approx(query_rs,query_in_bc13, q, yleft=0, yright=0)$y
x <- ref_in_bc13[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
length(query_in_bc13)
load("D:/RSVPdtw/RSVPdtw/data/fuse.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15, file = "iRaman/iRamanPlus.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15, file = "D:/RSVPdtw/RSVPdtw/data/iRaman/iRamanPlus.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15, file = "iRaman/iRamanPlus.rda")
Error in gzfile(file, "wb") : 无法打开链结
此外: Warning message:
In gzfile(file, "wb") :
无法打开压缩文件'iRaman/iRamanPlus.rda'，可能是因为'No such file or directory'
> save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman/iRamanPlus.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15, file = "iRaman/iRamanPlus.rda")
Error in gzfile(file, "wb") : 无法打开链结
此外: Warning message:
In gzfile(file, "wb") :
无法打开压缩文件'iRaman/iRamanPlus.rda'，可能是因为'No such file or directory'
> save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman/iRamanPlus.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman/iRamanPlus.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman/iRamanPlus.rda")
错误: 意外的'>' in ">"
> save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman.rda")
save(s,y1,y2,y3,y4,y5,y6,ref_in,query_rs,query_in_bc,ref_in_bc,ref_in_bc1,ref_in_bc2,ref_in_bc3,ref_in_bc4,ref_in_bc5,ref_in_bc6,ref_in_bc7,ref_in_bc8,ref_in_bc9,ref_in_bc10,ref_in_bc11,ref_in_bc12,ref_in_bc13,ref_in_bc14,ref_in_bc15,query_in_bc1,query_in_bc2,query_in_bc3,query_in_bc4,query_in_bc5,query_in_bc6,query_in_bc7,query_in_bc8,query_in_bc9,query_in_bc10,query_in_bc11,query_in_bc12,query_in_bc13,query_in_bc14,query_in_bc15,file = "D:/RSVPdtw/RSVPdtw/data/iRaman.rda")
ls()
load("D:/RSVPdtw/RSVPdtw/data/iRaman.rda")
data(iRaman)
x = ref_in
pretreated <- x - airPLS(x,10e7,4,0.8)
pretreated
data(iRaman)
x = ref_in_bc
y = query_in_bc
s <- warpingpath(x,y,8,6,8)
warpingpath <- function (x,y,d,e,maxshift)
{
result <- VPdtw(reference=x,query=y, dilation(x,d)/e,maxshift)
s <- result$shift
return(s)
}
data(iRaman)
x = ref_in
pretreated <- x - airPLS(x,10e7,4,0.8)
data(iRaman)
x = ref_in_bc
y = query_in_bc
s <- warpingpath(x,y,8,6,8)
s
fuse_spectra <- function(x){
s = c()
for (i in 1:length(ncol(x))) {
a <- x[,i]
if (i == 1) {
s = a
}else{
s = s+a
}
}
return(s)}
data(iRaman)
x <- cbind(y1,y2,y3,y4,y5,y6)
s <- fuse_spectra(x)
s
RSVPdtw <- function(m,s)
{
s1 <- s[1:1000]
s2 <- c(0,rep(0,length(m)-1001))
x <- m
s <- c(s1,s2)
q <- x + s
return(c(q))}
data(iRaman)
rs_min=300
rs_max=3000
m <- query_rs
query_rs=query_rs[query_rs>rs_min & query_rs<rs_max]
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc14, q, yleft=0, yright=0)$y
x <- ref_in_bc14[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
#' Title Process of Raman standardization
#'
#' @param input type of m is a vector
#' @param n is the result of warping path
#'
#' @return q is result of warped
#' @export
#'
#' @examples
#' data(iRaman)
#' rs_min=300
#' rs_max=3000
#' m <- query_rs
#' query_rs=query_rs[query_rs>rs_min & query_rs<rs_max]
#' q <- RSVPdtw(m,s)
#' query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
#' query_interp = approx(query_rs,query_in_bc1, q, yleft=0, yright=0)$y
#' x <- ref_in_bc1[1:1600]
#' y <- query_interp[1:1600]
#' cor.test(x,y)
RSVPdtw <- function(m,s)
{
s1 <- s[1:1000]
s2 <- c(0,rep(0,length(m)-1001))
x <- m
s <- c(s1,s2)
q <- x + s
return(c(q))}
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc1, q, yleft=0, yright=0)$y
x <- ref_in_bc1[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
query_in_bc1
s
s
load("D:/RSVPdtw/RSVPdtw/data/iRaman.rda")
RSVPdtw <- function(m,s)
{
s1 <- s[1:1000]
s2 <- c(0,rep(0,length(m)-1001))
x <- m
s <- c(s1,s2)
q <- x + s
return(c(q))}
data(iRaman)
rs_min=300
rs_max=3000
m <- query_rs
query_rs=query_rs[query_rs>rs_min & query_rs<rs_max]
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc1, q, yleft=0, yright=0)$y
x <- ref_in_bc1[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc2, q, yleft=0, yright=0)$y
x <- ref_in_bc2[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc3, q, yleft=0, yright=0)$y
x <- ref_in_bc3[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc13, q, yleft=0, yright=0)$y
x <- ref_in_bc13[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
#' Title Process of Raman standardization
#'
#' @param input type of m is a vector
#' @param n is the result of warping path
#'
#' @return q is result of warped
#' @export
#'
#' @examples
#' data(iRaman)
#' rs_min=300
#' rs_max=3000
#' m <- query_rs
#' query_rs=query_rs[query_rs>rs_min & query_rs<rs_max]
#' q <- RSVPdtw(m,s)
#' query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
#' query_interp = approx(query_rs,query_in_bc15, q, yleft=0, yright=0)$y
#' x <- ref_in_bc15[1:1600]
#' y <- query_interp[1:1600]
#' cor.test(x,y)
RSVPdtw <- function(m,s)
{
s1 <- s[1:1000]
s2 <- c(0,rep(0,length(m)-1001))
x <- m
s <- c(s1,s2)
q <- x + s
return(c(q))}
q <- RSVPdtw(m,s)
query_in_bc=query_rs[query_rs>rs_min & query_rs<rs_max]
query_interp = approx(query_rs,query_in_bc15, q, yleft=0, yright=0)$y
x <- ref_in_bc15[1:1600]
y <- query_interp[1:1600]
cor.test(x,y)
warpingpath <- function (x,y,d,e,maxshift)
{
result <- VPdtw(reference=x,query=y, dilation(x,d)/e,maxshift)
s <- result$shift
return(s)
}
data(iRaman)
x = ref_in_bc
y = query_in_bc
s <- warpingpath(x,y,8,6,8)
s
load("D:/RSVPdtw/RSVPdtw/data/iRaman.rda")
warpingpath <- function (x,y,d,e,maxshift)
{
result <- VPdtw(reference=x,query=y, dilation(x,d)/e,maxshift)
s <- result$shift
return(s)
}
data(iRaman)
x = ref_in_bc
y = query_in_bc
s <- warpingpath(x,y,8,6,8)
s
devtools::document()
